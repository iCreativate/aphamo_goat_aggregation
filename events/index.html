<!DOCTYPE html>
<html lang="en-ZA">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Events ‚Äì Workshops, vet days, and aggregation activities at Aphamo Goat Aggregation Centre and Koedoeberg Farm.">
  <title>Events ‚Äì Aphamo Goat Aggregation</title>
  <link rel="icon" href="/images/logo/aphamo-logo.png" type="image/png">
  <link rel="stylesheet" href="../styles/main.css?v=3">
  <style>
    /* Events gallery ‚Äì thumbnail / card grid */
    .events-gallery { display: grid; gap: var(--space-lg); margin-top: var(--space-xl); }
    @media (min-width: 640px) { .events-gallery { grid-template-columns: repeat(2, 1fr); } }
    @media (min-width: 960px) { .events-gallery { grid-template-columns: repeat(3, 1fr); gap: var(--space-xl); } }
    .events-card {
      background: var(--color-white);
      border-radius: var(--radius-xl);
      overflow: hidden;
      border: 1px solid var(--color-border);
      box-shadow: var(--shadow-1);
      transition: transform 0.25s ease, box-shadow 0.25s ease, border-color 0.25s ease;
      display: flex;
      flex-direction: column;
      cursor: pointer;
      text-decoration: none;
      color: inherit;
      text-align: left;
    }
    .events-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-2);
      border-color: var(--color-primary);
      color: inherit;
    }
    .events-card__thumb {
      position: relative;
      overflow: hidden;
      aspect-ratio: 16/10;
      background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%);
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .events-card__thumb svg {
      width: 48px;
      height: 48px;
      opacity: 0.4;
      color: var(--color-white);
    }
    .events-card__thumb .events-card__badge {
      position: absolute;
      top: var(--space-md);
      right: var(--space-md);
      font-size: 0.7rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      padding: 0.25rem 0.5rem;
      border-radius: var(--radius-sm);
      background: rgba(255,255,255,0.95);
      color: var(--color-primary-dark);
    }
    .events-card__thumb .events-card__badge--past { background: var(--color-surface-3); color: var(--color-ink-secondary); }
    .events-card__thumb .events-card__badge--ongoing { background: var(--color-secondary); color: var(--color-white); }
    .events-card__body { padding: var(--space-lg); flex-grow: 1; display: flex; flex-direction: column; }
    .events-card__title { font-size: 1.125rem; font-weight: 600; color: var(--color-ink); margin: 0 0 var(--space-sm); line-height: 1.3; }
    .events-card__meta { font-size: var(--text-small); color: var(--color-ink-secondary); margin: 0; display: flex; flex-wrap: wrap; gap: var(--space-sm); align-items: center; }
    .events-card__meta span { display: inline-flex; align-items: center; gap: 0.25rem; }
    .events-card__cta { font-size: 0.8125rem; font-weight: 500; color: var(--color-primary); margin-top: var(--space-md); }
    .events-card:hover .events-card__cta { text-decoration: underline; }
    .events-gallery-empty { text-align: center; padding: var(--space-2xl); color: var(--color-ink-secondary); }
    /* Modal */
    .events-modal {
      position: fixed; inset: 0; z-index: 100;
      display: none; align-items: center; justify-content: center;
      padding: var(--space-lg);
      background: rgba(0,0,0,0.5);
      opacity: 0;
      transition: opacity 0.2s ease;
    }
    .events-modal.is-open { display: flex; opacity: 1; }
    .events-modal__backdrop { position: absolute; inset: 0; cursor: pointer; }
    .events-modal__box {
      position: relative;
      max-width: 480px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      background: var(--color-white);
      border-radius: var(--radius-xl);
      box-shadow: var(--shadow-3);
      padding: var(--space-xl);
    }
    .events-modal__close {
      position: absolute; top: var(--space-md); right: var(--space-md);
      width: 36px; height: 36px; padding: 0; border: none; border-radius: var(--radius-md);
      background: var(--color-surface-2); color: var(--color-ink);
      cursor: pointer; display: flex; align-items: center; justify-content: center;
      font-size: 1.25rem; line-height: 1;
    }
    .events-modal__close:hover { background: var(--color-surface-3); }
    .events-modal__title { font-size: 1.375rem; font-weight: 600; margin: 0 0 var(--space-md); color: var(--color-ink); padding-right: 2rem; }
    .events-modal__meta { font-size: var(--text-small); color: var(--color-ink-secondary); margin-bottom: var(--space-lg); display: flex; flex-wrap: wrap; gap: var(--space-md); align-items: center; }
    .events-modal__details { margin-bottom: var(--space-lg); line-height: 1.6; color: var(--color-ink); }
    .events-modal__actions { margin-top: var(--space-lg); }
  </style>
  <script src="../scripts/admin-data.js"></script>
  <script src="../scripts/menu.js"></script>
</head>
<body>
  <header class="site-header">
    <div class="site-header__inner">
      <a href="/" class="logo">
        <img src="../images/logo/aphamo-logo.png" alt="Aphamo Goat Aggregation logo" class="logo__img" onerror="this.style.display='none'">
      </a>
      <nav class="nav" aria-label="Main">
        <a class="nav__link" href="/">Home</a>
        <div class="nav__dropdown">
          <a class="nav__link" href="/breeds/">Goat Aggregation Hub</a>
          <ul class="nav__sub" aria-label="Goat Aggregation Hub submenu">
            <li><a class="nav__sublink" href="/sell/">Beneficiary Programme</a></li>
          </ul>
        </div>
        <a class="nav__link" href="/training/">Training &amp; Development</a>
        <a class="nav__link" href="/listings/">Browse Listings</a>
        <a class="nav__link" href="/about/">About Us</a>
        <a class="nav__link" href="/events/">Events</a>
        <a class="nav__link" href="/contact/">Contact</a>
        <a class="nav__link nav__link--cta" href="/the-hub/">The Hub</a>
      </nav>
      <button type="button" class="menu-trigger" aria-label="Open menu">
        <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M3 12h18M3 6h18M3 18h18"/></svg>
      </button>
    </div>
    <nav class="about-breadcrumb site-header__breadcrumb" aria-label="Breadcrumb">
      <div class="container">
        <a href="/">Home</a>
        <span class="about-breadcrumb__sep" aria-hidden="true">/</span>
        <span aria-current="page">Events</span>
      </div>
    </nav>
  </header>

  <main>
    <section class="page-hero page-hero--blc" aria-labelledby="events-hero-title">
      <div class="container page-hero__container">
        <h1 id="events-hero-title" class="page-hero__title">Events</h1>
        <p class="page-hero__sub">Workshops, vet days, and aggregation activities at Koedoeberg Farm and across the network.</p>
      </div>
    </section>

    <section class="section" aria-labelledby="events-intro-title">
      <div class="container">
        <h2 id="events-intro-title" class="listings-intro__title">Upcoming events</h2>
        <p class="listings-intro__text">Join us for hands-on workshops, herd health days, and aggregation drop-offs. Click an event for details. Events are also announced on the <a href="/training/">Training &amp; Development</a> page. <a href="/contact/">Contact us</a> to register or for dates in your area.</p>
        <div id="events-gallery" class="events-gallery" role="list">
          <div id="events-gallery-inner" class="events-gallery-empty" role="status">Loading events‚Ä¶</div>
        </div>
        <p style="margin-top: var(--space-lg);">More events will be added as dates are confirmed. <a href="/contact/">Contact us</a> to express interest or to host an event in your region.</p>
      </div>
    </section>

    <div id="events-modal" class="events-modal" aria-hidden="true" role="dialog" aria-labelledby="events-modal-title" aria-modal="true">
      <div class="events-modal__backdrop" id="events-modal-backdrop" aria-label="Close"></div>
      <div class="events-modal__box">
        <button type="button" class="events-modal__close" id="events-modal-close" aria-label="Close">&times;</button>
        <h2 id="events-modal-title" class="events-modal__title"></h2>
        <p class="events-modal__meta" id="events-modal-meta"></p>
        <div class="events-modal__details" id="events-modal-details"></div>
        <div class="events-modal__actions">
          <a href="/contact/" class="btn btn--primary">Contact us to register</a>
        </div>
      </div>
    </div>

    <section class="cta-band" aria-labelledby="events-cta-title">
      <div class="container">
        <h2 id="events-cta-title" class="cta-band__title">Get involved</h2>
        <p class="cta-band__sub">Register for events, join a workshop, or find out about aggregation days near you.</p>
        <div class="cta-band__actions">
          <a href="/contact/" class="btn btn--cream btn--lg">Contact Us</a>
          <a href="/training/" class="btn btn--outline btn--lg">Training &amp; Development</a>
        </div>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="footer__grid">
      <div class="footer__brand">
        <a href="/" class="footer__logo" aria-label="Aphamo Goat Aggregation ‚Äì Home">
          <img src="../images/logo/aphamo-logo.png" alt="" width="160" height="64" loading="lazy" onerror="this.style.display='none'; this.nextElementSibling?.classList.remove('footer__logo-fallback--hidden');">
          <span class="footer__logo-fallback footer__logo-fallback--hidden">Aphamo Goat Aggregation</span>
        </a>
        <p class="footer__tagline">South Africa's premier goat aggregation & learning hub. Buy, sell, connect, master goat farming.</p>
      </div>
      <div>
        <h3 class="footer__title">Platform</h3>
        <ul class="footer__links">
          <li><a href="/the-hub/">The Hub</a></li>
          <li><a href="/breeds/">Goat Aggregation Hub</a></li>
          <li><a href="/training/">Training &amp; Development</a></li>
          <li><a href="/listings/">Browse Listings</a></li>
          <li><a href="/sell/">Beneficiary Programme</a></li>
        </ul>
      </div>
      <div>
        <h3 class="footer__title">Company</h3>
        <ul class="footer__links">
          <li><a href="/about/">About Us</a></li>
          <li><a href="/events/">Events</a></li>
          <li><a href="/contact/">Contact</a></li>
          <li><a href="/privacy/">Privacy (POPIA)</a></li>
        </ul>
      </div>
    </div>
    <div class="footer__bottom">
      <span>¬© 2026 Aphamo Goat Aggregation. POPIA-compliant. SSL secured.</span>
      <span class="footer__credit">Designed and developed by <a href="https://www.icreativate.co.za" target="_blank" rel="noopener noreferrer">iCreativate</a></span>
    </div>
  </footer>

  <script>
    (function () {
      var adminData = window.AphamoAdminData;
      if (!adminData || !adminData.getEvents) return;
      var gallery = document.getElementById('events-gallery');
      var modal = document.getElementById('events-modal');
      var modalTitle = document.getElementById('events-modal-title');
      var modalMeta = document.getElementById('events-modal-meta');
      var modalDetails = document.getElementById('events-modal-details');
      if (!gallery || !modal) return;

      var events = adminData.getEvents();
      var order = { upcoming: 0, ongoing: 1, past: 2 };
      events = events.slice().sort(function (a, b) {
        var o = (order[a.status] ?? 1) - (order[b.status] ?? 1);
        if (o !== 0) return o;
        return (a.date || '').localeCompare(b.date || '');
      });

      function openModal(ev) {
        if (!ev) return;
        modalTitle.textContent = ev.title || 'Event';
        modalMeta.innerHTML = (ev.location ? '<span>üìç ' + escapeHtml(ev.location) + '</span>' : '') +
          (ev.date ? '<span>üìÖ ' + escapeHtml(ev.date) + '</span>' : '<span>üìÖ Date TBC</span>');
        modalDetails.textContent = ev.details || 'No further details at the moment. Contact us for more information.';
        modal.setAttribute('aria-hidden', 'false');
        modal.classList.add('is-open');
        document.body.style.overflow = 'hidden';
      }
      function closeModal() {
        modal.setAttribute('aria-hidden', 'true');
        modal.classList.remove('is-open');
        document.body.style.overflow = '';
      }
      function escapeHtml(s) {
        var div = document.createElement('div');
        div.textContent = s;
        return div.innerHTML;
      }

      gallery.innerHTML = '';
      if (events.length === 0) {
        gallery.innerHTML = '<p class="events-gallery-empty" style="grid-column:1/-1">No events at the moment. Check back soon.</p>';
        return;
      }
      gallery.setAttribute('role', 'list');
      events.forEach(function (ev) {
        var dateText = ev.date || 'TBC';
        var badgeClass = ev.status === 'past' ? 'events-card__badge--past' : (ev.status === 'ongoing' ? 'events-card__badge events-card__badge--ongoing' : 'events-card__badge');
        var badgeText = ev.status === 'past' ? 'Past' : (ev.status === 'ongoing' ? 'Ongoing' : 'Upcoming');
        var card = document.createElement('div');
        card.className = 'events-card';
        card.setAttribute('role', 'listitem');
        card.setAttribute('tabindex', '0');
        card.innerHTML =
          '<div class="events-card__thumb">' +
            '<span class="events-card__badge ' + badgeClass + '">' + escapeHtml(badgeText) + '</span>' +
            '<svg aria-hidden="true" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>' +
          '</div>' +
          '<div class="events-card__body">' +
            '<h3 class="events-card__title">' + escapeHtml(ev.title || 'Event') + '</h3>' +
            '<p class="events-card__meta">' +
              (ev.location ? '<span>üìç ' + escapeHtml(ev.location) + '</span>' : '') +
              '<span>üìÖ ' + escapeHtml(dateText) + '</span>' +
            '</p>' +
            '<span class="events-card__cta">View details ‚Üí</span>' +
          '</div>';
        card.addEventListener('click', function () { openModal(ev); });
        card.addEventListener('keydown', function (e) {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            openModal(ev);
          }
        });
        gallery.appendChild(card);
      });

      document.getElementById('events-modal-backdrop').addEventListener('click', closeModal);
      document.getElementById('events-modal-close').addEventListener('click', closeModal);
      document.addEventListener('keydown', function (e) {
        if (e.key === 'Escape' && modal.classList.contains('is-open')) closeModal();
      });
    })();
  </script>
</body>
</html>
